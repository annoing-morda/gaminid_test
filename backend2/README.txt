Задача решена в классе players_store.
Метод этого класса get_competitors возвращает список потенциальных соперников игрока, id которого передан в этот метод.
Кроме этого реализован класс player, объекты которого хранят информацию об игроке.
Суть решения заключается в следующем. Игроки представляются как элементы метрического пространства, в котором метрика определена friend-методом класса player metric. Чтобы найти ближайших к данному игроку по рейтингу и уровню, выбираются четыре его соседа: два ближайших по уровню и два ближайших по рейтингу. Из них выбирается самый близкий в смысле введенной метрики. Вокруг игрока описывается окружность с радиусом, равным расстоянию до ближайшего соседа, окружность описывается квадратом, стороны которого параллельны осям координат. Выбираются игроки, попавшие в этот квадрат, и n ближайших возвращаются.